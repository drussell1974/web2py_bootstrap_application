# Coding the ATS Veterinarian Booking System using AI

Ask AI to create a base Web2py application based on your design. You should model this as close as possible to the design. For example, the following requests specify the relationship between each entity (table) and specify the attributes (fields), in two requests.

- *[Introducion](README.md)
- *[Lesson 1. Define the base Web2py application](LESSON_1.md)
- *[Lesson 2. Create the create_pet view](LESSON_2.md)
- *[Lesson 3. Implement Form Validation and Datatypes](LESSON_3.md)
- *[Lesson 4. Create controllers for CRUD actions for each entity](LESSON_4.md)
- *[Lesson 5. Fixing and creating relationships](LESSON_5.md)
- *[Lesson 6. Functional Testing and Boundary Testing](LESSON_6.md)
- *[Lesson 7. Display values across more than one table - INNER JOIN](LESSON_7.md)
- *[Troubleshooting](TROUBLESHOOTING.md)

**IMPORTANT:**

When using AI it is best practive to keep each request in the same conversation.

# Lesson 7. Display values across more than one table - INNER JOIN #

During previous lesson we carried out functional and boundary testing ([Lesson 6. Functional Testing and Boundary Testing](LESSON_6.md)). This focused more on the functional purpose of the application. You should see the application now taking shape and almost fully funtional.

Functional testing verifies that the features and functions of a software application are working as expected, according to its specifications. It checks the correctness of functionalities using defined test cases, compares actual results with expected ones, and is conducted at various software levels.

During this lesson we will look at other aspects of the testing and improving the application.

## 1. Modify Pet index controller action and view ##

### Edit controllers/pets.py ###

**Edit the pet controller â€“ controllers/pets.py**

Create inner join in the index pet controller by matching the owner_id attribute on the pet table against the id attribute on the owner table 



```python
def index(): 
    # Create innert join on the pet and owner tables (see updates on pet/index.html) 
    pets = db(db.pet.owner_id == db.owner.id).select() 
    return dict(pets=pets) 
```

### Edit views/pets/index.html ###

**Edit the pets index page - views/pets/index.html**


Modify the for loop to iterate throught the row that contains both pet and owner instance. 
Add table Owner column heading (<th></th) and show first and last name attributes in column values (<td></td>).

| Before | After |
| --- | --- |
| 
```html
    {{for pet in pets:}} 
        <tr> 
            <td>{{=pet.name}}</td> 
            <td>{{=pet.breed}}</td> 
            <td>{{=pet.sex}}</td> 
            <td>{{=pet.age}}</td> 
            <td> 
                {{=A('Edit', _href=URL('edit_pet', args=[pet.id]))}} | 
                {{=A('Delete', _href=URL('delete_pet', args=[pet.id]), _class='delete-btn')}} 
            </td> 
        </tr> 
        {{pass}}
``` |
```html
{{for row in pets:}} 
    <tr> 
        <td>{{=row.pet.name}}</td> 
        <td>{{=row.pet.breed}}</td> 
        <td>{{=row.pet.sex}}</td> 
        <td>{{=row.pet.age}}</td> 
        <td>{{=row.owner.first_name}} {{=row.owner.last_name}}</td> 
        <td> 
            {{=A('Edit', _href=URL('edit_pet', args=[row.pet.id]))}} | 
            {{=A('Delete', _href=URL('delete_pet', args=[row.pet.id]), _class='delete-btn')}} 
        </td> 
    </tr> 
    {{pass}} |
| --- | --- |

```html
{{extend 'layout.html'}} 
<h1>Pets</h1> 
<table> 
    <thead> 
        <tr> 
            <th>Name</th> 
            <th>Breed</th> 
            <th>Sex</th>
            <th>Age</th> 
            <th>Owner</th> 
            <th>Actions</th> 
        </tr> 
    </thead> 
    <tbody> 
        <!-- # Show owner first_name and last_name (See inner join on controllers/pets.py index action)--> 
        {{for row in pets:}} 
        <tr> 
            <td>{{=row.pet.name}}</td> 
            <td>{{=row.pet.breed}}</td> 
            <td>{{=row.pet.sex}}</td> 
            <td>{{=row.pet.age}}</td> 
            <td>{{=row.owner.first_name}} {{=row.owner.last_name}}</td> 
            <td> 
                {{=A('Edit', _href=URL('edit_pet', args=[row.pet.id]))}} | 
                {{=A('Delete', _href=URL('delete_pet', args=[row.pet.id]), _class='delete-btn')}} 
            </td> 
        </tr> 
        {{pass}} 
    </tbody> 
</table> 
{{=A('Add Pet', _href=URL('create_pet'), _class='btn')}} 
```

**Optional: Apply styles to the table**

(ats_booking__lesson_7__bootstrap_css__table_class.png)
```html
...
<table class="table"> 
    <thead> 
        <tr> 
            <th>Name</th> 
            <th>Breed</th> 
...
```

**DISCLAIMER**

Writing code requires careful consideration of various factors, such as specific requirements, best practices, and potential risks. Therefore, it is crucial to thoroughly review and test any code generated by this AI model before implementing it in a production environment. The user assumes all responsibility and liability for the usage and consequences of any code written or derived from this AI model. The AI model's responses should be used with caution and verified by human experts to ensure accuracy and suitability for the intended purpose. OpenAI, the developers of this AI model, cannot be held liable for any damages or losses resulting from the use of the generated code.

**This guide uses markdown.**

*[Markdown Guide](https://www.markdownguide.org/basic-syntax/)